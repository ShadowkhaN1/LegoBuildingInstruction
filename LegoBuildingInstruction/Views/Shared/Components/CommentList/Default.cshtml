@model IEnumerable<Comment>
@inject UserManager<ApplicationUser> UserManager
@inject SignInManager<ApplicationUser> SignInManager

<h3>
    <span style="font-weight: bold">Comments (@Model.Count())</span>
</h3>



@foreach (var comment in Model)
{
    <div class="media">
        <a class="pull-left" href="#"><img class="rounded-circle" src="https://bootdey.com/img/Content/avatar/avatar1.png" alt=""></a>
        <div class="media-body">
            <h4 class="media-heading">@comment.User.FirstName @comment.User.LastName</h4>

            <p>@comment.Message</p>
            <div class="row">
                <div class="col-md-6"><i class="far fa-calendar-alt fa-fw"></i>@comment.CreatedAt.ToString("dd/MM/yyyy HHH:mm:ss")</div>
                @*<div class="col-md-6 text-right"><i class="fas fa-thumbs-up fa-fw"></i>3</div>*@


            </div>


            @if (SignInManager.IsSignedIn(User))
            {

                @if (comment.UserId == UserManager.GetUserId(User))
                {

                    <div class="row justify-content-end">
                        <div class="col-xs-2">
                            <a class="text-secondary" asp-controller="Comment" asp-action="EditComment" asp-route-id="@comment.CommentId"><i class="fas fa-edit fa-fw"></i>Edit</a>
                        </div>
                        <div class="col-xs-2">
                            <a class="text-secondary" asp-controller="Comment" asp-action="DeleteComment" asp-route-id="@comment.CommentId"  onclick="return confirm('Are you sure you want to delete post?')"><i class="fas fa-trash fa-fw"></i>Delete</a>
                        </div>
                    </div>
                }
            }


            @*<ul class="list-unstyled list-inline media-detail pull-right">
                    <li class=""><a href="">Like</a></li>
                    <li class=""><a href="">Reply</a></li>
                </ul>*@
        </div>
    </div>
}
